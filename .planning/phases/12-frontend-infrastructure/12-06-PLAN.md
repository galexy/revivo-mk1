---
phase: 12-frontend-infrastructure
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - libs/ui/src/components/button.tsx
  - libs/ui/src/components/card.tsx
  - libs/ui/src/components/input.tsx
  - libs/ui/src/components/label.tsx
  - libs/ui/src/index.ts
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "shadcn/ui components installed via official CLI (not manually created)"
    - "All existing component exports remain intact (Button, buttonVariants, Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent, Input, Label)"
    - "App renders without errors after component replacement"
    - "All quality gates pass (lint, typecheck, test)"
  artifacts:
    - path: "libs/ui/src/components/button.tsx"
      provides: "CLI-generated Button component"
    - path: "libs/ui/src/components/card.tsx"
      provides: "CLI-generated Card component"
    - path: "libs/ui/src/components/input.tsx"
      provides: "CLI-generated Input component"
    - path: "libs/ui/src/components/label.tsx"
      provides: "CLI-generated Label component"
  key_links:
    - from: "libs/ui/src/index.ts"
      to: "libs/ui/src/components/*.tsx"
      via: "re-exports"
      pattern: "export.*from.*components/"
    - from: "apps/web/src/app/app.tsx"
      to: "@workspace/ui"
      via: "import"
      pattern: "import.*from '@workspace/ui'"
---

<objective>
Replace manually-created shadcn/ui components with official CLI-generated versions.

Purpose: During Phase 12-04, ui.shadcn.com was unreachable (firewall), so components were manually created by copying from documentation. The site is now reachable (HTTP 200 confirmed). Running the CLI ensures components match the official registry exactly, including any subtle differences in class names, accessibility attributes, or Radix primitive usage that manual copying may have missed.

Output: Four CLI-generated component files (button, card, input, label) that replace the manual versions, with all existing exports and imports preserved.
</objective>

<execution_context>
@/home/developer/.claude/get-shit-done/workflows/execute-plan.md
@/home/developer/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@libs/ui/components.json
@libs/ui/package.json
@libs/ui/src/index.ts
@apps/web/src/app/app.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace components with CLI-generated versions</name>
  <files>
    libs/ui/src/components/button.tsx
    libs/ui/src/components/card.tsx
    libs/ui/src/components/input.tsx
    libs/ui/src/components/label.tsx
  </files>
  <action>
    Run the shadcn CLI from libs/ui/ to overwrite all four components with official versions:

    ```bash
    cd libs/ui && npx shadcn@latest add button card input label --overwrite --yes
    ```

    The CLI will use components.json (already configured for monorepo with new-york style) to generate components into src/components/.

    After CLI runs, verify:
    1. Each file exists and has content (not empty)
    2. Each file imports `cn` from `../lib/utils` (the monorepo path)
    3. Button exports both `Button` and `buttonVariants`
    4. Card exports `Card`, `CardHeader`, `CardFooter`, `CardTitle`, `CardDescription`, `CardContent`
    5. Input exports `Input`
    6. Label exports `Label`

    If the CLI changes any export names or removes exports that apps/web/src/app/app.tsx depends on, manually fix the exports to maintain backward compatibility. The app imports: `Button, Card, CardHeader, CardTitle, CardContent, Input, Label` from `@workspace/ui`.

    Also check libs/ui/src/index.ts still re-exports everything correctly. If the CLI modified it or if new exports appeared, update index.ts to include them.

    Run `pnpm install` if the CLI added any new dependencies to libs/ui/package.json.
  </action>
  <verify>
    ```bash
    # Verify files exist and have content
    wc -l libs/ui/src/components/button.tsx libs/ui/src/components/card.tsx libs/ui/src/components/input.tsx libs/ui/src/components/label.tsx

    # Verify exports match what app.tsx imports
    grep -c "export.*Button" libs/ui/src/components/button.tsx
    grep -c "export.*Card" libs/ui/src/components/card.tsx
    grep -c "export.*Input" libs/ui/src/components/input.tsx
    grep -c "export.*Label" libs/ui/src/components/label.tsx

    # Verify index.ts re-exports all components
    grep "Button" libs/ui/src/index.ts
    grep "Card" libs/ui/src/index.ts
    grep "Input" libs/ui/src/index.ts
    grep "Label" libs/ui/src/index.ts
    ```
  </verify>
  <done>All four component files replaced by official shadcn CLI output. All exports preserved. index.ts re-exports intact.</done>
</task>

<task type="auto">
  <name>Task 2: Verify all quality gates and tests pass</name>
  <files>
    libs/ui/src/components/button.tsx
    libs/ui/src/components/card.tsx
    libs/ui/src/components/input.tsx
    libs/ui/src/components/label.tsx
  </files>
  <action>
    Run the full verification ladder for the web project to confirm the CLI-generated components work identically to the manual versions:

    1. TypeScript compilation: `npx nx typecheck web`
    2. Lint: `npx nx lint web`
    3. Unit tests: `npx nx test web`
    4. Format check: `npx nx format web`

    If any step fails, diagnose and fix. Common issues:
    - CLI may generate slightly different TypeScript patterns (e.g., `React.ComponentProps` vs `React.ComponentPropsWithoutRef`) -- fix type errors
    - CLI may use different import style -- ensure `cn` import resolves
    - New Radix dependencies may need `pnpm install`

    If lint or format fails on CLI-generated files, run the fixer:
    - `npx nx lint web --fix` for lint issues
    - Format: `cd apps/web && npx prettier --write ../libs/ui/src/components/*.tsx` (or equivalent Nx target)

    Do NOT change the component logic to pass tests -- the CLI output is the source of truth. Only fix formatting/lint issues.
  </action>
  <verify>
    ```bash
    npx nx typecheck web
    npx nx lint web
    npx nx test web
    npx nx format web
    ```
    All four commands exit 0.
  </verify>
  <done>All quality gates pass. CLI-generated shadcn/ui components are fully integrated and working. The gap from 12-UAT.md is closed.</done>
</task>

</tasks>

<verification>
1. `cd libs/ui && npx shadcn@latest diff` reports no updates (components match registry)
2. `npx nx typecheck web` passes with zero errors
3. `npx nx lint web` passes with zero errors
4. `npx nx test web` passes (2 component tests)
5. `npx nx format web` passes
6. All exports in libs/ui/src/index.ts resolve correctly
7. apps/web/src/app/app.tsx imports work without changes
</verification>

<success_criteria>
- Components in libs/ui/src/components/ are CLI-generated (not manually created)
- All existing imports in apps/web continue to work
- All quality gates pass (typecheck, lint, test, format)
- `shadcn diff` shows no updates needed
</success_criteria>

<output>
After completion, create `.planning/phases/12-frontend-infrastructure/12-06-SUMMARY.md`
</output>
