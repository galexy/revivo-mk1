---
phase: 15-api-integration-validation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/package.json
  - libs/ui/src/lib/dialog.tsx
  - libs/ui/src/lib/select.tsx
  - libs/ui/src/lib/radio-group.tsx
  - libs/ui/src/lib/separator.tsx
  - libs/ui/src/lib/badge.tsx
  - libs/ui/src/index.ts
  - apps/web/src/lib/api-client.ts
  - apps/web/src/mocks/handlers.ts
  - apps/web/src/mocks/fixtures.ts
autonomous: true

must_haves:
  truths:
    - "shadcn/ui Dialog, Select, RadioGroup, Separator, Badge components available via @workspace/ui"
    - "react-currency-input-field available in apps/web"
    - "API client has create functions for all 7 account types (checking, savings, credit_card, loan, brokerage, ira, rewards)"
    - "MSW handlers mock all 7 account creation endpoints"
  artifacts:
    - path: "libs/ui/src/lib/dialog.tsx"
      provides: "Dialog component"
    - path: "libs/ui/src/lib/select.tsx"
      provides: "Select component"
    - path: "libs/ui/src/lib/radio-group.tsx"
      provides: "RadioGroup component"
    - path: "libs/ui/src/lib/separator.tsx"
      provides: "Separator component"
    - path: "libs/ui/src/lib/badge.tsx"
      provides: "Badge component"
    - path: "apps/web/src/lib/api-client.ts"
      provides: "Complete account CRUD API client"
  key_links:
    - from: "libs/ui/src/index.ts"
      to: "libs/ui/src/lib/dialog.tsx"
      via: "re-export"
      pattern: "export.*from.*dialog"
---

<objective>
Install dependencies, add shadcn/ui components, and complete the API client layer for all account types.

Purpose: Foundation work -- all subsequent plans need these components and API functions.
Output: New shadcn/ui components in libs/ui/, react-currency-input-field installed, api-client.ts with all 7 account type create functions, MSW handlers updated.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/CHECKPOINTS.md
@apps/web/package.json
@apps/web/src/lib/api-client.ts
@apps/web/src/lib/api-types.generated.ts
@apps/web/src/mocks/handlers.ts
@apps/web/src/mocks/fixtures.ts
@libs/ui/src/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-currency-input-field and add shadcn/ui components</name>
  <files>
    apps/web/package.json
    libs/ui/src/lib/dialog.tsx
    libs/ui/src/lib/select.tsx
    libs/ui/src/lib/radio-group.tsx
    libs/ui/src/lib/separator.tsx
    libs/ui/src/lib/badge.tsx
    libs/ui/src/index.ts
  </files>
  <action>
    1. Install react-currency-input-field in apps/web:
       `cd /workspace && pnpm add react-currency-input-field --filter @workspace/web`

    2. Add shadcn/ui components using the CLI. The project uses a pnpm wrapper at /tmp/bin/pnpm for the shadcn CLI. Run from workspace root:
       ```
       # Create pnpm wrapper if it doesn't exist
       mkdir -p /tmp/bin && echo '#!/bin/sh\nexec npx pnpm "$@"' > /tmp/bin/pnpm && chmod +x /tmp/bin/pnpm
       # Add components
       PATH="/tmp/bin:$PATH" npx shadcn@latest add dialog select radio-group separator badge
       ```
       If the CLI fails (no internet), manually create components following the exact shadcn/ui source code patterns (Radix UI primitives + Tailwind classes + cn utility). Each component file goes in libs/ui/src/lib/ and gets re-exported from libs/ui/src/index.ts.

    3. Update libs/ui/src/index.ts to re-export ALL new components:
       - Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger, DialogClose, DialogOverlay, DialogPortal
       - Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectSeparator, SelectTrigger, SelectValue, SelectScrollUpButton, SelectScrollDownButton
       - RadioGroup, RadioGroupItem
       - Separator
       - Badge, badgeVariants

    4. Verify imports work: `npx nx typecheck web`
  </action>
  <verify>
    `npx nx typecheck web` passes with zero errors.
    `npx nx typecheck ui` passes with zero errors.
  </verify>
  <done>
    All 5 shadcn/ui components (Dialog, Select, RadioGroup, Separator, Badge) importable from @workspace/ui.
    react-currency-input-field listed in apps/web/package.json dependencies.
  </done>
</task>

<task type="auto">
  <name>Task 2: Complete API client with all account types and update MSW handlers</name>
  <files>
    apps/web/src/lib/api-client.ts
    apps/web/src/mocks/handlers.ts
    apps/web/src/mocks/fixtures.ts
  </files>
  <action>
    1. Add missing type exports to api-client.ts for all account type requests. The generated types exist in api-types.generated.ts but are not yet exported/used:
       - CreateLoanAccountRequest
       - CreateBrokerageAccountRequest
       - CreateIraAccountRequest
       - CreateRewardsAccountRequest

    2. Add missing create functions to api-client.ts:
       ```typescript
       export async function createLoanAccount(data: CreateLoanAccountRequest): Promise<AccountResponse> {
         const response = await api.post<AccountResponse>('/api/v1/accounts/loan', data);
         return response.data;
       }

       export async function createBrokerageAccount(data: CreateBrokerageAccountRequest): Promise<AccountResponse> {
         const response = await api.post<AccountResponse>('/api/v1/accounts/brokerage', data);
         return response.data;
       }

       export async function createIraAccount(data: CreateIraAccountRequest): Promise<AccountResponse> {
         const response = await api.post<AccountResponse>('/api/v1/accounts/ira', data);
         return response.data;
       }

       export async function createRewardsAccount(data: CreateRewardsAccountRequest): Promise<AccountResponse> {
         const response = await api.post<AccountResponse>('/api/v1/accounts/rewards', data);
         return response.data;
       }
       ```

    3. Update MSW handlers (apps/web/src/mocks/handlers.ts) to add mock endpoints for the 4 new account types:
       ```typescript
       http.post(`${baseURL}/api/v1/accounts/loan`, () => {
         return HttpResponse.json(mockLoanAccount);
       }),
       http.post(`${baseURL}/api/v1/accounts/brokerage`, () => {
         return HttpResponse.json(mockAccount);
       }),
       http.post(`${baseURL}/api/v1/accounts/ira`, () => {
         return HttpResponse.json(mockAccount);
       }),
       http.post(`${baseURL}/api/v1/accounts/rewards`, () => {
         return HttpResponse.json(mockRewardsAccount);
       }),
       ```

    4. Add additional mock fixtures in fixtures.ts for variety in tests:
       - mockLoanAccount (account_type: 'loan', with apr and term_months)
       - mockCreditCardAccount (account_type: 'credit_card', with credit_limit)
       - mockRewardsAccount (account_type: 'rewards', with rewards_balance)
       Update mockAccountsList to include more diverse account types (at least checking, savings, credit_card, loan) so tests exercise grouping logic.

    5. Verify: `npx nx typecheck web && npx nx test web`
  </action>
  <verify>
    `npx nx typecheck web` passes.
    `npx nx test web` passes (existing tests still work with updated fixtures).
  </verify>
  <done>
    api-client.ts exports create functions for all 7 account types.
    MSW handlers cover all 7 create endpoints.
    Fixtures include diverse account types for testing account grouping.
  </done>
</task>

</tasks>

<verification>
- `npx nx typecheck web` passes
- `npx nx typecheck ui` passes
- `npx nx test web` passes
- All 5 shadcn/ui components importable: Dialog, Select, RadioGroup, Separator, Badge
- api-client.ts has 7 create functions (checking, savings, credit_card, loan, brokerage, ira, rewards)
</verification>

<success_criteria>
Foundation layer complete: all components, dependencies, and API functions ready for UI implementation.
</success_criteria>

<output>
After completion, create `.planning/phases/15-api-integration-validation/15-01-SUMMARY.md`
</output>
